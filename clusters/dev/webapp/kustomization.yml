apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
  managedBy: "platform-team"
  environment: "dev"
resources:
  - ../../../apps/webapp

namePrefix: dev-
replicas:
  - name: web-app
    count: 1


images:
  - name: ghcr.io/roberthstrand/demo-webapp
    newName: ghcr.io/roberthstrand/demo-webapp
    newTag: v2.0.0

patches:
- patch: |-
    - op: add
      path: /spec/template/spec/containers/0/env/-
      value:
        name: BGCOLOR
        value: "red"
    target:
      name: web-app
      kind: Deployment
      namespace: webapp